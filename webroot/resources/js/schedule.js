var Schedule=function(){function t(t,r,e,a,d,o,l){this.schedule_container=t,this.schedule_header=r,this.schedule_detail=e,this.generated=l,this.json_data=d,this.object=o,this.name=a;var n=15,s=[],i=function(t,r,e,a,d){var o=function(t){var r=t.indexOf(":"),e=parseInt(t.substr(0,r)),a=parseInt(t.substr(r+1));return 60*e+a},l=o(r);l%n!=0&&(l-=l%n),s[a+"-"+l]={title:t,start:o(r),end:o(e),weekday:a,attr:d}},u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],c=this.json_data,h="";for(var b in c){var y;y="sections"==b?{"class":"scheduler-cells green"}:{"class":"scheduler-cells yellow"};for(var v in c[b]){var f=c[b][v];if(h+='<table class="table table-bordered table-condensed '+("sections"==b?"":"yellow")+'">',h+="<thead><th>"+f.course_subject+" "+f.course_number+"</th><th>"+f.letter+"</th><th></th><th>"+f.instructor+"</th><th>"+f.capacity+"</th><th></th>"+(l?"<th></th>":'<th colspan="2"><button class="btn btn-danger btn-xs drop-section pull-right" data-hash-id="'+f.hash+'"><i class="glyphicon glyphicon-trash fix-icon"></i> Drop</button></th>')+"</tr></thead>",null!=f.lecture)for(var g in f.lecture){var _=f.lecture[g].start,p=f.lecture[g].end,T=f.course_subject+" "+f.course_number+"<br>LECT "+f.letter+"<br>"+_+" - "+p+"<br>"+f.lecture[g].room;"Online"!=f.lecture[g].room&&i(T,_,p,f.lecture[g].weekday,y),h+="<tr><td>LECT</td><td></td><td>"+f.lecture[g].room+"</td><td></td><td></td><td>"+_+" - "+p+"</td><td>"+u[f.lecture[g].weekday]+"</td></tr>"}if(null!=f.tutorial){var _=f.tutorial.start,p=f.tutorial.end,T=f.course_subject+" "+f.course_number+"<br>TUT "+f.tutorial.letter+"<br>"+_+" - "+p+"<br>"+f.tutorial.room;"Online"!=f.tutorial.room&&i(T,_,p,f.tutorial.weekday,y),h+="<tr><td>TUT</td><td>"+f.tutorial.letter+"</td><td>"+f.tutorial.room+"</td><td>"+f.tutorial.instructor+"</td><td>"+f.tutorial.capacity+"</td><td>"+_+" - "+p+"</td><td>"+u[f.tutorial.weekday]+"</td></tr>"}if(null!=f.laboratory){var _=f.laboratory.start,p=f.laboratory.end,T=f.course_subject+" "+f.course_number+"<br>LAB "+f.laboratory.letter+"<br>"+_+" - "+p+"<br>"+f.laboratory.room;"Online"!=f.laboratory.room&&i(T,_,p,f.laboratory.weekday,y),h+="<tr><td>LAB</td><td>"+f.laboratory.letter+"</td><td>"+f.laboratory.room+"</td><td>"+f.laboratory.instructor+"</td><td>"+f.laboratory.capacity+"</td><td>"+_+" - "+p+"</td><td>"+u[f.laboratory.weekday]+"</td></tr>"}h+="</table>"}}if(0==h.length){var m='<div class="text-center" style="padding: 20px">No details. Start by adding courses to your list!</div>';return m}this.details=h,this.htmlTable=function(){if(0==Object.keys(s).length){var t='<div class="text-center" style="text-align: center; padding: 30px 0; color: black">No schedule to display. ):</div>';return t}var r={"class":"table table-bordered table-condensed",style:"color: black"},e=1,a=5,d=null,o=null;for(var l in s){d=s[l].start,o=s[l].end;break}for(var l in s)s[l].start<d&&(d=s[l].start),s[l].end>o&&(o=s[l].end);d%n!=0&&(d-=d%n),o%n!=0&&(o-=o%n);var i=d-n,u=o+n,c="<table";for(var h in r)c+=" "+h+'="'+r[h]+'"';c+=">",c+="<tr><td>Time</td>";for(var b=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=e;a+1>y;y++)c+="<td>"+b[y]+"</td>";c+="</tr>";for(var v=[],f=i;u>=f;f+=n){v[f.toString()]=[];for(var g=e;a>=g;g++)v[f.toString()][g.toString()]=!1}for(var f=i;u>=f;f+=n){c+="<tr>";var _=Math.floor(f/60),p=f%60;p=10>p?"0"+p:p;var T=_+":"+p;c+="<td>"+T+"</td>";for(var g=e;a>=g;g++){var m=s[g+"-"+f];if(null==m)v[f.toString()][g.toString()]||(c+="<td></td>");else{v[f.toString()][g.toString()]=!0;var S=m.end-m.start,j=Math.ceil(S/n);c+="<td";for(var h in m.attr)c+=" "+h+'="'+m.attr[h]+'"';c+='" rowspan="'+j+'">'+m.title+"</td>";for(var k=f+j*n,w=f+n;w!=k;w+=n)v[w.toString()][g.toString()]=!0}}c+="</tr>"}return c+="</table>"}()}return t.prototype.render=function(){this.schedule_container.innerHTML="",this.schedule_container.insertAdjacentHTML("beforeend",this.htmlTable),null!=this.schedule_header&&(this.schedule_header.innerHTML="",this.schedule_header.insertAdjacentHTML("beforeend",this.name)),null!=this.schedule_detail&&(this.schedule_detail.innerHTML="",this.schedule_detail.insertAdjacentHTML("beforeend",this.details))},t}();